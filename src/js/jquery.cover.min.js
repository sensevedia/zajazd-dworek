!function(a){var i=a.fn.cover=function(t){var e,r;if("object"!=typeof t&&t){if(!i[t])throw'Error: The method "'+t+"\" doesn't exist in jQuery Cover";r=Array.prototype.slice.call(arguments,1),e=t}else r=arguments,e="_init";return a(this).each(function(){var s=a(this).is("img")?a(this):a("img",this),o=s.data("data");if("_init"==e&&o)return void i._opts(o,t,!0);if(o=o||{self:a(this),callbacks:[]},"_init"==e?(o.opts="_init"==t?Array.prototype.slice.call(arguments,1):t,r=[o]):r=[o].concat(r),s.data("data",o),"_triggerCallback"==e)return i[e].apply(s,r);try{i[e].apply(s,r)}catch(n){if("callbackReturnedFalse"!=n)throw n}})};a.extend(i,{interval:!1,_init:function(t){var e=i._opts(t,t.opts,!0);t.img=new Image;for(var r in e.callbacks)i.bindCallback(t,r,e.callbacks[r]);t.img.src=t.self.attr("src"),t.self.wrap(a('<div class="greenishCover height"><div>')),t.wrapper=t.self.parent().parent(),e.backgroundPosition&&(e.backgroundPosition.search(/top/i)>=0?t.wrapper.addClass("top"):e.backgroundPosition.search(/bottom/i)>=0&&t.wrapper.addClass("bottom"),e.backgroundPosition.search(/left/i)>=0?t.wrapper.addClass("left"):e.backgroundPosition.search(/right/i)>=0&&t.wrapper.addClass("right")),e.loadHidden&&t.self.css({visibility:"hidden"}),t.self.cover("_triggerCallback","preLoading"),i.interval||(i.interval=setInterval(i._loading,100)),t.opts.checkWindowResize&&a(window).unbind("resize.cover").bind("resize.cover",function(){a(".greenishCover").cover("update")})},update:function(){var i=a(this),t=i.is("img")?i:i.find("img"),e=t.data("data"),r=e.wrapper,s=r.hasClass("height")?"height":"width",o=r.height()/r.width()>=e.ratio?"height":"width";s!==o&&(r.addClass(o).removeClass(s),t.cover("_triggerCallback","ratioSwitch"))},_loading:function(){i.complete=!0,a(".greenishCover").each(function(){var t=a("img",this).data("data"),e=t.img;if(!e||!e.complete||e.height<=0||e.width<=0)return void(i.complete=!1);t.ratio=e.height/e.width;var r=50/e.width*e.height;t.self.css({marginTop:-r+"%"}),t.opts.loadHidden&&t.self.css({visibility:"visible"}),t.self.cover("_triggerCallback","postLoading"),t.wrapper.cover("update")}),i.complete&&(clearInterval(i.interval),i.interval=!1)},bindCallback:function(a,i,t){t="function"==typeof t?[t]:t,a.callbacks[i]=a.callbacks[i]||[];for(var e in t)a.callbacks[i].push(t[e])},_triggerCallback:function(a,i,t){if(!a.callbacks[i]||a.callbacks[i].length<=0)return t;for(var e in a.callbacks[i]){if((t=a.callbacks[i][e].apply(this,[a,t]))!==!1)continue;throw"callbackReturnedFalse"}return t},_opts:function(i,t,e){return t=a.extend(!0,{},this.defaults,i.opts||{},t||{}),e&&(i.opts=t),t},defaults:{backgroundPosition:!1,callbacks:{},checkWindowResize:!0,loadHidden:!0}})}(jQuery);